<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="/../js/jquery-1.10.2.min.js"></script>
        <link rel="stylesheet" href="/../css/style.css">
    </head>
<body>
<div class="data-table">
    <table border="1" cellpadding="7" cellspacing="7" align="center">
        <tr>
            <th>CPF do professor</th>
            <th>Nome</th>
            <th>Órgão</th>
            <th>Curso</th>
            <th>Semestre</th>
            <th>Avaliação</th>
        </tr>
        <% for(var i = 0; i < nome.length; i++) {%>
        <tr>
            <td><%= cpf[i]%></td>
            <td><%= nome[i]%></td>
            <td><%= orgao[i]%></td>
            <td><%= curso[i]%></td>
            <td><%= semestre[i]%></td>
            <td><%= avaliacao[i]%></td>
            <td>
                <a href="/editprof/<%=cpf[i]%>">Editar</a>
               
                <a href="/delprof/?cpf<%=cpf[i]%>">Deletar</a>
                <a href="/listalunosimpac/?cpf=<%=cpf[i]%>">Ver alunos impactados</a>
               
            </td>
        </tr>
        <% } %>
    </table>
    </div>
        </form>
</div>
<div class="page-data">
     <ul class="err-area"></ul>
</div>

<script>

    function editAluno(){
       
       $.ajax({
        
        url:"/listalunos",
        type:"post",
        data:$("#the-form").serialize(),
        success:function(res){
            
            window.location.reload();
            return false;
        },
        error:function(xhr, status, error){
            
            console.log(xhr.responseText);
            var err = '';
            $.each(JSON.parse(xhr.responseText) , function(i, item) {
               
                 err +='<li>'+item.msg+'</li>';
            });
            $(".err-area").html(err);    
            return false;
        }
        
       });
    }
    
    function deleteAluno(user_id){
    
        $.ajax({
            url:"/listalunos/"+user_id,
            type: 'DELETE',
            success: function(res) {
                
                window.location.reload();
                return false;
            },
            error:function(xhr, status, error){
            
                console.log(xhr.responseText);
                alert("Error deleting");
                return false;
            }
        });
    }

</script>
</body>
</html>

</body>

</html>